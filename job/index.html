<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Job - o2r web API</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Job";
    var mkdocs_page_input_path = "job.md";
    var mkdocs_page_url = "/job/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> o2r web API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Index</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../upload/">Upload</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Job</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#job">Job</a></li>
                
                    <li><a class="toctree-l4" href="#new-job">New Job</a></li>
                
                    <li><a class="toctree-l4" href="#list-jobs">List jobs</a></li>
                
                    <li><a class="toctree-l4" href="#view-single-job">View single Job</a></li>
                
                    <li><a class="toctree-l4" href="#status-report">Status report</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../compendium/">Compendium</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../user/">User</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../search/">Search</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">o2r web API</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Job</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="job">Job</h1>
<p>Execution jobs are used to execute a research compendium. When a new execution
job is started, the contents of the research compendium are cloned to create a
trackable execution. The status information, logs and final working directory
data are saved in their final state, so that they can be reviewed later on.</p>
<p>All execution jobs are tied to a single research compendium and reflect the
execution history of that research compendium.</p>
<p>A trivial execution job would be a completely unmodified research compendium, to
test the reproducibility of a research compendium. A <em>potential</em> future feature
would be that the input data (input files, datasets, parameters) can be altered
to run a modified execution job. This functionality is not yet final.</p>
<h2 id="new-job">New Job</h2>
<p>Create and run a new execution job. Requires a <code>compendium_id</code>.</p>
<p><code>curl -F compendium_id=$ID http://…/api/v1/job</code></p>
<p><code>POST /api/v1/job</code></p>
<pre><code class="json">200 OK

{&quot;job_id&quot;:&quot;ngK4m&quot;}
</code></pre>

<p><strong>Implemented:</strong> No</p>
<p><strong>Stability:</strong> 0 - subject to changes</p>
<h3 id="body-parameters">Body parameters:</h3>
<ul>
<li><code>compendium_id</code> - The <code>id</code> of the compendium to base this job on.</li>
<li><code>inputs</code> - <strong><em>proposal</em></strong> - Array with one or more <code>FileDescriptor</code>.</li>
</ul>
<h3 id="filedescriptor"><code>FileDescriptor</code></h3>
<p><em>The FileDescriptor functionality is only a potential feature and not at all
finalized.</em></p>
<p><code>[FileDescriptor]</code> allows overriding files from the compendium with files
from a different execution job or a different compendium.</p>
<p><strong><code>[FileDescriptor]</code> Syntax:</strong></p>
<pre><code>ERC/JOB:ID:Source:Destination
</code></pre>

<p>e.g. <code>ERC:lnj82:/data/bigdataset.Rdata:/data/newinput.Rdata</code> would provide
<code>/data/bigdataset.Rdata</code> from the <code>ERC</code> with the ID <code>lnj82</code> as the file
<code>/data/newinput.Rdata</code> in this execution Job.</p>
<h3 id="error-responses">Error Responses</h3>
<pre><code class="json">404 Not Found

{&quot;error&quot;:&quot;no compendium with this ID found&quot;}
</code></pre>

<pre><code class="json">500 Internal Server Error

{&quot;error&quot;:&quot;could not create job&quot;}
</code></pre>

<pre><code class="json">500 Internal Server Error

{
  &quot;error&quot;:&quot;could not provide file&quot;,
  &quot;filedescriptor&quot;:&quot;[FileDescriptor]&quot;
 }
</code></pre>

<h2 id="list-jobs">List jobs</h2>
<p>Lists jobs. Will return up to 100 results by default. For pagination purposes, URLs for previous and next results are provided if applicable. Results can be filtered by one or more related <code>compendium_id</code>.</p>
<p><code>curl -F compendium_id=$ID http://…/api/v1/job?limit=100&amp;start=2&amp;compendium_id=$ID</code></p>
<p><code>GET /api/v1/job?limit=100&amp;start=2&amp;compendium_id=a4Dnm</code></p>
<pre><code class="json">200 OK

{
  &quot;results&quot;:[
    &quot;nkm4L&quot;,
    &quot;asdi5&quot;,
    &quot;nb2sg&quot;,
    …
  ],
  &quot;next&quot;:&quot;/api/v1/job?limit=100&amp;start=3&quot;,
  &quot;previous&quot;:&quot;/api/v1/job?limit=100&amp;start=1&quot;
}
</code></pre>

<p><strong>Implemented:</strong> No</p>
<p><strong>Stability:</strong> 0 - subject to changes</p>
<h3 id="get-parameters">GET parameters</h3>
<ul>
<li><code>compendium_id</code> - Comma-separated list of related compendium ids to filter by.</li>
<li><code>start</code> - List from specific search result onwards. 1-indexed. Defaults to 1.</li>
<li><code>limit</code> - Specify maximum amount of results per page. Defaults to 100.</li>
</ul>
<h2 id="view-single-job">View single Job</h2>
<p>View details for a single job.</p>
<p><code>curl http://…/api/v1/job/$ID</code></p>
<p><code>GET /api/v1/job/:id</code></p>
<pre><code class="json">200 OK

{
  &quot;id&quot;:&quot;nkm4L&quot;,
  &quot;compendium_id&quot;:&quot;a4Dnm&quot;,
  &quot;steps&quot;:{
    &quot;unpack&quot;:{
      &quot;status&quot;:&quot;failure&quot;,
      &quot;text&quot;:&quot;not a valid archive&quot;
    },
    …
  }
}
</code></pre>

<p><strong>Implemented:</strong> No</p>
<p><strong>Stability:</strong> 0 - subject to changes</p>
<h3 id="url-parameters">URL Parameters</h3>
<ul>
<li><code>:id</code> - id of the job to be viewed</li>
</ul>
<h3 id="steps">Steps</h3>
<p>The answer will contain information to the following <code>steps</code>:</p>
<ul>
<li><code>validate_bag</code></li>
<li><code>validate_compendium</code></li>
<li><code>validate_dockerfile</code></li>
<li><code>image_build</code></li>
<li><code>image_execute</code></li>
<li><code>cleanup</code></li>
</ul>
<p>Their status will be one of:</p>
<ul>
<li><code>queued</code></li>
<li><code>running</code></li>
<li><code>success</code></li>
<li><code>failure</code></li>
<li><code>warning</code></li>
<li><code>skip</code></li>
</ul>
<p>Additional explanations to their state will be transmitted in the <code>text</code> property.</p>
<h3 id="error-responses_1">Error Responses</h3>
<pre><code class="json">404 Not Found

{&quot;error&quot;:&quot;no compendium with this ID found&quot;}
</code></pre>

<h2 id="status-report">Status report</h2>
<ul>
<li>bagit verifiziert<ul>
<li>erc format verifiziert</li>
<li>image gebaut</li>
<li>ausführung im container<ul>
<li>output?</li>
<li>prozente?</li>
</ul>
</li>
<li>validierung</li>
<li>endergebnis</li>
</ul>
</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../compendium/" class="btn btn-neutral float-right" title="Compendium">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../upload/" class="btn btn-neutral" title="Upload"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../upload/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../compendium/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
